{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Bill of Lading - {{ bol.bol_number }}</title>
    <style>
        @page {
            size: letter landscape;
            margin: 0.4in;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 10pt;
            line-height: 1.3;
            color: #000;
        }

        /* Header Section */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            border-bottom: 2px solid #000;
            padding-bottom: 8px;
            margin-bottom: 12px;
        }

        .header-title {
            font-size: 20pt;
            font-weight: bold;
        }

        .header-bol-number {
            text-align: right;
        }

        .header-bol-number .label {
            font-size: 8pt;
            color: #666;
        }

        .header-bol-number .number {
            font-size: 16pt;
            font-weight: bold;
        }

        /* Two Column Layout */
        .row {
            display: flex;
            gap: 12px;
            margin-bottom: 10px;
        }

        .col {
            flex: 1;
        }

        /* Box Styles */
        .box {
            border: 1px solid #000;
            height: 100%;
        }

        .box-header {
            background: #e0e0e0;
            font-weight: bold;
            font-size: 9pt;
            padding: 4px 8px;
            border-bottom: 1px solid #000;
        }

        .box-content {
            padding: 8px;
            font-size: 9pt;
        }

        .box-content strong {
            font-size: 10pt;
        }

        /* Ship From / Consignee Boxes */
        .address-line {
            margin-bottom: 2px;
        }

        /* Shipment Info Table */
        .info-table {
            width: 100%;
            border-collapse: collapse;
        }

        .info-table td {
            padding: 3px 0;
            vertical-align: top;
        }

        .info-table td:first-child {
            font-weight: bold;
            width: 90px;
        }

        /* Material Section */
        .material-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }

        .material-table th,
        .material-table td {
            border: 1px solid #000;
            padding: 6px 8px;
        }

        .material-table th {
            background: #e0e0e0;
            font-weight: bold;
            font-size: 9pt;
            text-align: left;
        }

        .material-table td {
            vertical-align: top;
        }

        .chemistry {
            font-family: 'Courier New', monospace;
            font-size: 8pt;
            background: #f5f5f5;
            padding: 4px;
            margin-top: 4px;
        }

        .weight-cell {
            text-align: center;
            font-weight: bold;
        }

        /* Notes Section */
        .notes-box {
            background: #f5f5f5;
            border: 1px solid #000;
            padding: 8px;
            font-size: 8pt;
            margin-bottom: 10px;
        }

        .notes-box strong {
            display: block;
            margin-bottom: 4px;
        }

        .notes-box ul {
            margin-left: 16px;
        }

        .notes-box li {
            margin-bottom: 2px;
        }

        /* Special Instructions */
        .special-instructions {
            background: #fff4e6;
            border: 3px solid #ff6b00;
            padding: 12px;
            margin-bottom: 10px;
            text-align: center;
        }

        .special-instructions .alert-header {
            color: #8b0000;
            font-weight: bold;
            font-size: 12pt;
            margin-bottom: 8px;
        }

        .special-instructions .alert-content {
            font-size: 11pt;
        }

        /* Signature Section */
        .signature-row {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .signature-box {
            flex: 1;
            border: 1px solid #000;
            padding: 8px;
        }

        .signature-box .title {
            font-weight: bold;
            font-size: 9pt;
            margin-bottom: 30px;
        }

        .signature-line {
            border-top: 1px solid #000;
            padding-top: 4px;
            font-size: 8pt;
        }

        .signature-name {
            font-weight: bold;
        }

        .signature-role {
            font-size: 7pt;
            color: #666;
        }

        /* Date display */
        .date-display {
            margin-top: 4px;
            font-size: 9pt;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-title">BILL OF LADING</div>
        <div class="header-bol-number">
            <div class="label">BOL NUMBER</div>
            <div class="number">{{ bol.bol_number }}</div>
        </div>
    </div>

    <!-- Ship From / Consignee Row -->
    <div class="row">
        <div class="col">
            <div class="box">
                <div class="box-header">SHIP FROM:</div>
                <div class="box-content">
                    <div class="address-line"><strong>Cincinnati Barge & Rail Terminal, LLC</strong></div>
                    <div class="address-line">c/o {{ bol.care_of_co|default:"PrimeTrade, LLC" }}</div>
                    <div class="address-line">1707 Riverside Drive</div>
                    <div class="address-line">Cincinnati, Ohio 45202</div>
                    <div class="address-line">Phone: (513) 721-1707</div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="box">
                <div class="box-header">CONSIGNEE (SHIP TO):</div>
                <div class="box-content">
                    <div class="address-line"><strong>{{ bol.buyer_name }}</strong></div>
                    {% for line in bol.ship_to.splitlines %}
                    <div class="address-line">{{ line }}</div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <!-- Shipment Info Row -->
    <div class="row">
        <div class="col">
            <div class="box">
                <div class="box-header">SHIPMENT INFORMATION</div>
                <div class="box-content">
                    <table class="info-table">
                        <tr>
                            <td>Date:</td>
                            <td>{{ bol.bol_date|date:"m/d/Y"|default:bol.date }}</td>
                        </tr>
                        <tr>
                            <td>Customer PO#:</td>
                            <td>{{ bol.customer_po|default:"-" }}</td>
                        </tr>
                        <tr>
                            <td>Release #:</td>
                            <td>{{ bol.release_display|default:bol.release_number|default:"-" }}</td>
                        </tr>
                        <tr>
                            <td>Carrier:</td>
                            <td>{{ bol.carrier_name }}</td>
                        </tr>
                        <tr>
                            <td>Truck #:</td>
                            <td>{{ bol.truck_number|default:"-" }}</td>
                        </tr>
                        <tr>
                            <td>Trailer #:</td>
                            <td>{{ bol.trailer_number|default:"-" }}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Material Section -->
    <table class="material-table">
        <thead>
            <tr>
                <th style="width: 50%;">MATERIAL DESCRIPTION</th>
                <th style="width: 20%;">LOT NUMBER</th>
                <th style="width: 30%;">WEIGHT</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <strong>{{ bol.product_name }}</strong>
                    {% if bol.chemistry_display or bol.lot %}
                    <div class="chemistry">
                        Analysis: {{ bol.chemistry_display|default:"N/A" }}
                    </div>
                    {% endif %}
                </td>
                <td style="text-align: center;">
                    {% if bol.lot %}
                        {{ bol.lot.code }}
                    {% elif bol.lot_ref %}
                        {{ bol.lot_ref.code }}
                    {% else %}
                        N/A
                    {% endif %}
                </td>
                <td class="weight-cell">
                    {{ bol.total_weight_lbs|floatformat:0|default:"0" }} LBS<br>
                    {{ bol.net_tons|floatformat:2 }} N.T.
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Notes Section -->
    <div class="notes-box">
        <strong>IMPORTANT NOTES:</strong>
        <ul>
            <li>Weights referenced are estimates. See scale ticket for actual weight.</li>
            <li>Liability Limitation for loss or damage in this shipment may be applicable. See 49 U.S.C. § 14706(c)(1)(A) and (B).</li>
            <li>Material is non-hazardous.</li>
            <li>This is to certify that the above named materials are properly classified, packaged, marked and labeled, and are in proper condition for transportation according to the applicable regulations of the DOT.</li>
        </ul>
    </div>

    <!-- Special Instructions (if present) -->
    {% if bol.special_instructions %}
    <div class="special-instructions">
        <div class="alert-header">⚠ CRITICAL DELIVERY INSTRUCTION ⚠</div>
        <div class="alert-content">{{ bol.special_instructions }}</div>
    </div>
    {% endif %}

    <!-- Signature Section -->
    <div class="signature-row">
        <div class="signature-box">
            <div class="title">SHIPPER SIGNATURE</div>
            <div class="signature-line">
                <div class="signature-name">James Rose</div>
                <div class="signature-role">Authorized Representative</div>
            </div>
        </div>
        <div class="signature-box">
            <div class="title">CARRIER SIGNATURE</div>
            <div class="signature-line">
                <div class="signature-name">Driver Name</div>
                <div class="signature-role">Date / Time</div>
            </div>
        </div>
    </div>
</body>
</html>
